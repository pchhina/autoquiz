#!/usr/local/bin/Rint
library(quizme)
cat('syncing with network database...\n')
system('rclone sync gcloud:quizme ~/.quizme --stats-one-line -P --stats 2s')
cat('done\n')
cat('reading local database...\n')
quizme()
cat('done\n\n')
cat("Let's go!\n")
input <- 'z' # dummy input to force into while loop
while (input != 'b') {
    if (input == 'h' | input == 'm' | input == 'z') {
    cat('\n')
    ask()
    }
    cat('\n')
    input <- readline(prompt = '(h)it (m)iss (t)ell (b)ye (a)dd (c)hange (s)tatus (r)epeat: ')
    cat('\n')
    input <- as.character(input)
    switch(input,
           h = hit(),
           m = miss(),
           t = tell(),
           a = addq(),
           c = changeq(),
           s = show_status(),
           r = ask())
    }
cat('updating local database...\n')
bye()
cat('done\n')
cat('updating network database...\n')
system('rclone sync ~/.quizme gcloud:quizme --stats-one-line -P --stats 2s')
cat('done\n')
q()
